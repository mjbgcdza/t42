<!doctypehtml><html lang=th><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>บัตรประจำตัวผู้ป่วยดิจิทัล</title><meta name=description content=บัตรประจำตัวผู้ป่วยดิจิทัล><meta name=author content=T42><meta property=og:title content=บัตรประจำตัวผู้ป่วยดิจิทัล><meta property=og:description content="บัตรประจำตัวผู้ป่วยดิจิทัล for LIFF App"><meta property=og:type content=website><meta property=og:image content=https://lh3.googleusercontent.com/d/1Ms4fNBq5__DOhvBKAAb94-rUIjPjhjJ3><script src=https://cdn.tailwindcss.com></script><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;600;700&display=swap"rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/sweetalert2@11></script><script src=https://static.line-scdn.net/liff/edge/2/sdk.js></script><link rel=stylesheet href=https://bit.ly/fontiton5 charset=utf-8><style>*{font-family:line_seed_sans_th}body{background:linear-gradient(135deg,#667eea 0,#764ba2 50%,#f093fb 100%);min-height:100vh;overflow-x:hidden}.glass-card{background:rgba(255,255,255,.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);box-shadow:0 25px 50px rgba(0,0,0,.1)}.glass-modal{background:rgba(255,255,255,.98);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);border:1px solid rgba(255,255,255,.3)}.gradient-btn{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);position:relative;overflow:hidden;transition:all .3s ease}.gradient-btn:hover{transform:translateY(-2px);box-shadow:0 15px 30px rgba(102,126,234,.4)}.floating-label{position:relative}.floating-label input,.floating-label select{border:2px solid #e2e8f0;border-radius:16px;padding:20px 16px 8px 16px;background:rgba(255,255,255,.9);transition:all .3s ease;width:100%;font-size:16px}.floating-label input:focus,.floating-label select:focus{outline:0;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.1);background:#fff}.floating-label label{position:absolute;left:16px;top:20px;color:#64748b;font-size:16px;font-weight:500;transition:all .3s ease;pointer-events:none;background:#fff;padding:0 4px}.floating-label input:focus+label,.floating-label input:not(:placeholder-shown)+label,.floating-label select:focus+label,.floating-label select:not([value=""])+label{top:-8px;font-size:12px;color:#667eea;font-weight:600}@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes scaleIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.animate-fadeInUp{animation:fadeInUp .6s ease-out forwards}.animate-scaleIn{animation:scaleIn .4s ease-out forwards}.animate-pulse-slow{animation:pulse 2s ease-in-out infinite}.medical-spinner{width:60px;height:60px;border:4px solid rgba(255,255,255,.3);border-top:4px solid #667eea;border-radius:50%;animation:spin 1s linear infinite}#loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(102,126,234,.9),rgba(118,75,162,.9));display:flex;justify-content:center;align-items:center;z-index:9999;flex-direction:column;color:#fff;transition:opacity .3s ease}.qr-container{background:#fff;border-radius:20px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.1);position:relative;overflow:hidden}.modal-backdrop{background:rgba(0,0,0,.7);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.history-item{background:#fff;border-radius:12px;padding:16px;margin-bottom:12px;box-shadow:0 4px 12px rgba(0,0,0,.05);border-left:4px solid;transition:all .3s ease}.status-pending{border-color:#f59e0b}.status-confirmed{border-color:#22c55e}.status-postponed{border-color:#3b82f6}.status-cancelled{border-color:#ef4444}</style><div id=loading-overlay><div class=medical-spinner></div><div class="mt-6 text-center"><h3 class="text-xl font-semibold mb-2">กำลังตรวจสอบข้อมูล</h3><p class=text-white/80>กรุณารอสักครู่...</div></div><div id=main-content class="min-h-screen flex items-center justify-center p-4 hidden"><div class="w-full max-w-md animate-fadeInUp"><div class="glass-card rounded-3xl p-8 text-center mb-6"><div class="relative mb-6"><div class="w-24 h-24 mx-auto rounded-full bg-gradient-to-r from-blue-500 to-purple-600 p-1 animate-pulse-slow"><img id=user-picture src=https://lh3.googleusercontent.com/d/1Ck_OCfEW4dEp3A1k9yfQplYmW7qmwzFF alt="Medical Logo"class="w-full h-full rounded-full object-cover bg-white"></div></div><h1 id=patient-name class="text-3xl font-bold text-gray-800 mb-2"></h1><p class="text-gray-600 mb-6 font-medium">แสดง QR Code นี้กับเจ้าหน้าที่<div id=qr-code-container class="qr-container mb-6 inline-block"></div><p id=patient-id class="text-sm text-gray-500 font-medium bg-gray-50 px-4 py-2 rounded-full inline-block"></div><button id=show-history-btn class="gradient-btn w-full text-white font-bold py-4 px-6 rounded-2xl shadow-lg transition-all duration-300 flex items-center justify-center text-lg"><svg class="w-6 h-6 mr-3"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>ดูประวัติสุขภาพของฉัน</button></div></div><div id=registration-view class="min-h-screen flex items-center justify-center p-4 hidden"><div class="w-full max-w-md animate-scaleIn"><div class="glass-card rounded-3xl p-8"><div class="text-center mb-8"><div class="w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center"><svg class="w-8 h-8 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg></div><h2 class="text-2xl font-bold text-gray-800 mb-2">ลงทะเบียนผู้ป่วยใหม่</h2><p class=text-gray-600>กรุณากรอกข้อมูลพื้นฐานเพื่อเริ่มใช้งาน</div><form id=registration-form class=space-y-6><div class=floating-label><input id=reg-name placeholder=" "required><label for=reg-name>ชื่อ-นามสกุล</label></div><div class=floating-label><input type=number id=reg-age placeholder=" "required><label for=reg-age>อายุ</label></div><div class=floating-label><select id=reg-gender required><option value=""disabled selected hidden><option value=ชาย>ชาย<option value=หญิง>หญิง<option value=อื่นๆ>อื่นๆ</select><label for=reg-gender>เพศ</label></div><div class=floating-label><input id=reg-disease placeholder=" "><label for=reg-disease>โรคประจำตัว (ถ้ามี)</label></div><button type=submit class="gradient-btn w-full text-white font-bold py-4 px-6 rounded-2xl shadow-lg transition-all duration-300 text-lg mt-8">ลงทะเบียน</button></form></div></div></div><div id=history-modal class="fixed inset-0 modal-backdrop flex items-center justify-center p-4 z-50 hidden"><div class="glass-modal rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-scaleIn"><div id=modal-content class=p-8></div></div></div><script>const _0x58a7bc=_0x30c6;!function(t,e){const n=_0x30c6,a=_0x4a31();for(;;)try{if(497849===parseInt(n(561))/1*(-parseInt(n(474))/2)+-parseInt(n(464))/3*(-parseInt(n(563))/4)+parseInt(n(566))/5+parseInt(n(483))/6+parseInt(n(520))/7+-parseInt(n(485))/8*(-parseInt(n(572))/9)+parseInt(n(532))/10*(-parseInt(n(512))/11))break;a.push(a.shift())}catch(t){a.push(a.shift())}}();const API_URL="https://script.google.com/macros/s/AKfycbww4UnbY6_gLYdDkvIS-EQxCJgtlWx-3ya1YS4Q-ljcCCtX0RiIo6k6IMBW3jal1W74QA/exec",LIFF_ID=_0x58a7bc(498),loadingOverlay=document[_0x58a7bc(478)](_0x58a7bc(475)),mainContent=document[_0x58a7bc(478)](_0x58a7bc(552)),registrationView=document[_0x58a7bc(478)](_0x58a7bc(484)),registrationForm=document.getElementById(_0x58a7bc(562)),modalContent=document[_0x58a7bc(478)]("modal-content"),userPicture=document[_0x58a7bc(478)](_0x58a7bc(517));let patientData=null,currentUserLineId=null;function toggleLoading(t){const e=_0x58a7bc;loadingOverlay[e(529)].display=e(t?577:521)}async function initializeLiffAndGetData(){const t=_0x58a7bc;try{if(await liff[t(548)]({liffId:LIFF_ID,withLoginOnExternalBrowser:!0}),!liff.isLoggedIn())return void liff.login({redirectUri:window[t(553)][t(555)]});const e=await liff[t(533)]();currentUserLineId=e[t(522)],userPicture[t(470)]=e.pictureUrl;if(!(await liff[t(516)]())[t(601)])return void Swal[t(544)]({icon:t(504),title:"เดี๋ยวก่อน!",text:t(537),confirmButtonText:t(526)}).then((()=>{window[t(553)]="https://line.me/R/ti/p/@542dytmv"}));await fetchPatientData()}catch(e){console[t(504)](t(545),e),Swal[t(544)]({title:t(591),text:t(492),icon:"error",confirmButtonColor:t(602)}),toggleLoading(!1)}}async function fetchPatientData(){const t=_0x58a7bc;try{toggleLoading(!0);const e=await fetch(API_URL+t(505)+currentUserLineId),n=await e[t(603)]();n[t(531)]===t(482)&&n[t(579)].patientFound?(patientData=n[t(579)],displayPatientProfile()):displayRegistrationForm()}catch(e){console.error(t(488),e),Swal[t(544)]({title:t(591),text:"ไม่สามารถดึงข้อมูลผู้ป่วยได้",icon:t(504),confirmButtonColor:"#667eea"}),displayRegistrationForm()}finally{toggleLoading(!1)}}function displayPatientProfile(){const t=_0x58a7bc;mainContent[t(529)][t(598)]=t(577),registrationView.style[t(598)]="none",document[t(478)](t(535)).textContent=patientData[t(546)],document[t(478)]("patient-id")[t(500)]="รหัสผู้ป่วย: "+patientData[t(564)];const e=t(582)+patientData[t(564)];document.getElementById(t(495))[t(491)]=t(557)+e+t(527)}function displayRegistrationForm(){const t=_0x58a7bc;mainContent[t(529)].display=t(521),registrationView.style.display=t(577)}async function handleRegistration(t){const e=_0x58a7bc;t[e(534)](),toggleLoading(!0);const n=document[e(478)]("reg-name")[e(554)],a=document[e(478)](e(525))[e(554)],i=document.getElementById(e(456)).value,o=document[e(478)]("reg-disease")[e(554)]||e(524);if(!i)return Swal[e(544)]({title:e(551),text:"กรุณาเลือกเพศ",icon:e(469),confirmButtonColor:e(602)}),void toggleLoading(!1);const s={action:e(501),payload:{lineId:currentUserLineId,name:n,age:a,gender:i,disease:o}};try{const t=await fetch(API_URL,{method:"POST",headers:{"Content-Type":e(509)},body:JSON[e(592)](s)});if(!t.ok)throw new Error(e(550)+t.status+" "+t[e(486)]);const r=await t.json();if(r.status!==e(482))throw new Error(r[e(560)]||e(549));toggleLoading(!1),await Swal[e(544)]({title:e(479),text:e(593),icon:e(482),confirmButtonColor:e(602)}),patientData={PatientID:r.data[e(468)],Name:n,Age:a,Gender:i,UnderlyingDisease:o,appointments:[],medications:[]},displayPatientProfile()}catch(t){console[e(504)](e(596),t),Swal.fire({title:"ลงทะเบียนล้มเหลว",text:t[e(560)],icon:"error",confirmButtonColor:e(602)}),toggleLoading(!1)}}function formatMedicationTime(t){const e=_0x58a7bc;if(!t)return"";try{const n=new Date(t);if(isNaN(n[e(573)]()))return t;const a=n[e(458)]()[e(568)]()[e(513)](2,"0");return a+":"+n.getMinutes()[e(568)]()[e(513)](2,"0")}catch(e){return t}}function _0x4a31(){const t=['<div class="flex justify-between items-start mb-8"><div><h2 class="text-3xl font-bold text-gray-800 mb-2">',"fire","Initialization failed:","Name","</h5>","init","API returned an error.","Server error: ","ข้อมูลไม่ครบถ้วน","main-content","location","value","href","th-TH",'<img src="','<div class="text-sm font-semibold text-blue-600 bg-blue-100 px-3 py-1 rounded-full">ขอเลื่อนนัด</div>',"button","message","171VbnZGT","registration-form","95428uthrnT","PatientID","submit","4357445ehxHKB","updateAppointmentStatus","toString","hidden","click","split","720SBaqtt","getTime","AppointmentID","length","ยกเลิกนัด","flex","ไม่มีข้อมูล","data","เช้า","parentElement","https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=https://line.me?patientId=","full","medications","appointments",'คุณต้องการ "','<div class="text-sm font-semibold text-green-600 bg-green-100 px-3 py-1 rounded-full inline-flex items-center"><svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>ยืนยันแล้ว</div>',"</p>","appointmentId","สำเร็จ!","เกิดข้อผิดพลาด","stringify","ข้อมูลของคุณถูกบันทึกเรียบร้อยแล้ว",'" onerror="this.style.display=\'none\'" class="w-12 h-12 rounded-full mr-4"><div class="flex-grow"><p class="font-semibold text-gray-800">แพทย์ผู้ดูแล</p><p class="text-gray-600">',"closest","Registration failed:","Status","display","</div></div></div>","</div>","friendFlag","#667eea","json","join"," น.</div></div></div>","reg-gender","ยืนยันแล้ว","getHours","AssignedDoctor",'</p><p class="text-sm text-gray-600">พบแพทย์: ','</p></div><div class="history-item border-l-indigo-500 mt-3 flex items-center"><img src="',"addEventListener",'<div class="history-item ',"105VyUCUs","keys",'<div class="text-center py-8"><p class="text-gray-500 text-lg">ไม่มีประวัติการนัดหมาย</p></div>',"status-pending","patientId","warning","src","</div></div>","find","forEach","3144XDwWig","loading-overlay","setHours",".appointment-action-btn","getElementById","ลงทะเบียนสำเร็จ!","#d33","POST","success","1380084zYTqWX","registration-view","76168QHmKpO","statusText",'<p class="text-sm text-gray-700 bg-gray-50 p-2 rounded-md mt-2">หมายเหตุ: ',"Fetch patient data failed:","กลางวัน",'<div class="history-item border-l-purple-500"><div class="flex justify-between items-center"><div><p class="font-semibold text-gray-800">',"innerHTML","ไม่สามารถเชื่อมต่อกับระบบได้","dataset","mousedown","qr-code-container","UnderlyingDisease","Time","2007778477-WenK7Z7V","history-modal","textContent","addPatient","รอยืนยัน",'</h2><p class="text-gray-600">ประวัติสุขภาพ</p></div><button id="close-modal-btn" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors"><svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button></div><div class="space-y-8"><div><h4 class="font-bold text-gray-800 mb-4 flex items-center"><svg class="w-5 h-5 mr-2 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" /></svg>ข้อมูลสุขภาพทั่วไป</h4><div class="history-item border-l-red-500"><p class="font-semibold text-gray-800">โรคประจำตัว</p><p class="text-gray-600">',"error","?action=getPatientByLineId&lineId=",'</p></div></div></div><div><h4 class="font-bold text-gray-800 mb-4 flex items-center"><svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a2 2 0 012-2h4a2 2 0 012 2v4M8 7h8M8 7l-2 8h12l-2-8"/></svg>ประวัติการนัดหมาย</h4><div class="space-y-3">','</div><div class="mt-2 md:mt-0">',"status-postponed","text/plain;charset=utf-8",'</p><p class="text-sm text-gray-600">',"currentTarget","16885sauCBm","padStart",'</p></div><div class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium">เวลา: ','</div></div><div><h4 class="font-bold text-gray-800 mb-4 flex items-center"><svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/></svg>รายการยาปัจจุบัน</h4><div class="space-y-3">',"getFriendship","user-picture","push","Oh!","3940006FHVoAH","none","userId","ขอเลื่อนนัด","ไม่มี","reg-age","เพิ่มเพื่อน",'" alt="Patient QR Code" class="rounded-2xl">',"DOMContentLoaded","style","classList","status","16250HhfWcZ","getProfile","preventDefault","patient-name",'<div class="text-center py-8"><p class="text-gray-500 text-lg">ไม่มียาในรายการ</p></div>',"คุณยังไม่ได้เป็นเพื่อนกับเรา","contextmenu","DoctorNotes","รอการมอบหมาย","map","ยกเลิก"];return(_0x4a31=function(){return t})()}function categorizeMedications(t){const e=_0x58a7bc,n={"เช้า":[],"กลางวัน":[],"เย็น":[],"ก่อนนอน":[]};return t[e(473)]((t=>{const a=e;try{const e=formatMedicationTime(t[a(497)]),i=parseInt(e[a(571)](":")[0],10);i>=5&&i<12?n[a(580)][a(518)](t):i>=12&&i<17?n[a(489)][a(518)](t):i>=17&&i<21?n["เย็น"].push(t):n["ก่อนนอน"][a(518)](t)}catch(t){}})),n}function _0x30c6(t,e){const n=_0x4a31();return(_0x30c6=function(t,e){return n[t-=456]})(t,e)}function renderHistoryModal(){const t=_0x58a7bc;if(!patientData)return;const e=patientData[t(585)][t(575)]>0?patientData[t(585)].map((e=>{const n=t,a=new Date(e.AppointmentDate),i=a>=(new Date)[n(476)](0,0,0,0);let o="",s="";switch(e[n(597)]){case n(457):s="status-confirmed",o=n(587);break;case n(523):s=n(508),o=n(558);break;case n(576):s="status-cancelled",o='<div class="text-sm font-semibold text-red-600 bg-red-100 px-3 py-1 rounded-full">ยกเลิกนัด</div>';break;default:s=n(467),o=i?'<div class="flex flex-wrap gap-2 mt-3" data-appointment-id="'+e[n(574)]+'"><button data-status="ยืนยันแล้ว" class="appointment-action-btn flex-grow bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-3 rounded-lg text-sm">ยืนยัน</button><button data-status="ขอเลื่อนนัด" class="appointment-action-btn flex-grow bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm">ขอเลื่อน</button><button data-status="ยกเลิกนัด" class="appointment-action-btn flex-grow bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-3 rounded-lg text-sm">ยกเลิก</button></div>':'<div class="text-sm font-semibold text-gray-500 bg-gray-100 px-3 py-1 rounded-full">เลยกำหนด</div>'}return n(463)+s+'"><div class="flex justify-between items-start flex-wrap"><div><p class="font-semibold text-gray-800">'+a.toLocaleDateString(n(556),{dateStyle:n(583)})+n(460)+(e.DoctorName||"N/A")+n(588)+(e[n(539)]&&e[n(539)].trim()!==n(524)?n(487)+e[n(539)]+n(588):"")+n(507)+(e[n(597)]===n(502)&&i?"":o)+n(471)+(e[n(597)]===n(502)&&i?o:"")+n(600)}))[t(604)](""):t(466),n=categorizeMedications(patientData[t(584)]),a=Object[t(465)](n)[t(541)]((e=>{const a=t;if(0===n[e][a(575)])return"";const i=n[e][a(541)]((t=>a(490)+t.MedName+a(510)+t.Dosage+a(514)+formatMedicationTime(t[a(497)])+a(605)))[a(604)]("");return'<div class="mb-4"><h5 class="font-semibold text-gray-700 mb-2">'+e+a(547)+i+a(600)}))[t(604)]("");modalContent[t(491)]=t(543)+patientData[t(546)]+t(503)+(patientData[t(496)]||t(578))+t(461)+patientData.DoctorImage+t(594)+(patientData[t(459)]||t(540))+t(506)+e+t(515)+(patientData[t(584)][t(575)]>0?a:t(536))+t(599),document[t(478)](t(499)).classList.remove(t(569))}async function handleAppointmentAction(t){const e=_0x58a7bc,n=t.target[e(595)](e(477));if(!n)return;const a=n[e(581)][e(493)][e(589)],i=n[e(493)].status,{value:o}=await Swal.fire({title:e(586)+i+'"?',text:"การดำเนินการนี้จะแจ้งให้เจ้าหน้าที่ทราบ",icon:e(469),showCancelButton:!0,confirmButtonColor:"#667eea",cancelButtonColor:e(480),confirmButtonText:"ยืนยัน",cancelButtonText:e(542)});if(o){toggleLoading(!0);const t={action:e(567),payload:{appointmentId:a,status:i,lineUserId:currentUserLineId}};try{const n=await fetch(API_URL,{method:e(481),headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON[e(592)](t)}),o=await n[e(603)]();if("success"!==o[e(531)])throw new Error(o[e(560)]);{const t=patientData[e(585)][e(472)]((t=>t.AppointmentID===a));t&&(t.Status=i),renderHistoryModal(),toggleLoading(!1),await Swal[e(544)](e(590),o[e(579)][e(560)],e(482))}}catch(t){Swal[e(544)](e(591),t[e(560)],e(504)),toggleLoading(!1)}}}registrationForm[_0x58a7bc(462)](_0x58a7bc(565),handleRegistration),document.getElementById("show-history-btn")[_0x58a7bc(462)](_0x58a7bc(570),renderHistoryModal),modalContent[_0x58a7bc(462)](_0x58a7bc(570),handleAppointmentAction),document[_0x58a7bc(478)](_0x58a7bc(499)).addEventListener(_0x58a7bc(570),(t=>{const e=_0x58a7bc;(t.target===document[e(478)](e(499))||t.target.closest("#close-modal-btn"))&&t[e(511)][e(530)].add(e(569))})),document[_0x58a7bc(462)](_0x58a7bc(528),initializeLiffAndGetData);const message="ไม่อนุญาตให้คลิกขวาครับ";document[_0x58a7bc(462)](_0x58a7bc(538),(function(t){const e=_0x58a7bc;Swal[e(544)](e(519),message,e(504)),t[e(534)]()})),document[_0x58a7bc(462)](_0x58a7bc(494),(function(t){const e=_0x58a7bc;(2===t[e(559)]||1===t[e(559)])&&(Swal.fire(e(519),message,e(504)),t[e(534)]())}))</script>
